<div align="center">
<img width="1200" height="475" alt="GHBanner" src="https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6" />
</div>

# UltraMax POS v4.1 - Architectural Guide

เอกสารนี้ทำหน้าที่เป็น "สารบัญ" หรือ "คู่มือสถาปัตยกรรม" (Architectural Guide) สำหรับโปรเจกต์ UltraMax POS เพื่อให้ทุกคนที่เข้ามาดูโปรเจกต์นี้เห็นภาพรวม, การเชื่อมโยงของไฟล์, และหลักการทำงานทั้งหมดได้ในที่เดียว

## 1. ภาพรวมและวิสัยทัศน์ (Project Overview & Vision)

*   **วัตถุประสงค์ (Objective):** UltraMax POS คือแอปพลิเคชัน Point-of-Sale (POS) ที่ถูกออกแบบมาเพื่อความเร็ว, ความเสถียร, และการทำงานแบบออฟไลน์เป็นหลัก (Offline-First) สามารถซิงค์ข้อมูลการขายและเมนูสินค้ากับ Google Sheets ได้อย่างอัตโนมัติ
*   **วิสัยทัศน์ (Vision):** เราไม่ใช่แค่สร้างระบบ POS ที่ "ใช้ได้" แต่เรากำลังสร้าง "ผู้ช่วยอัจฉริยะ" ให้กับธุรกิจ ในฐานะ **"สถาปนิกผู้สร้างประสบการณ์ (Experience Architects)"** ภารกิจของเราคือการสร้างมาตรฐานใหม่ให้กับวงการ POS ด้วยแอปพลิเคชันที่มีความเสถียรสูงสุด, สวยงามน่าใช้, เรียบง่ายทรงพลัง, และขับเคลื่อนด้วยเทคโนโลยีที่ทันสมัยที่สุด
*   **ฟีเจอร์หลัก (Main Features):**
    *   **ระบบขายหน้าร้าน (POS):** หน้าจอการขายที่ใช้งานง่าย รองรับการค้นหา, การเลือกหมวดหมู่, และการเพิ่มสินค้าลงตะกร้าอย่างรวดเร็ว
    *   **ระบบจัดการออเดอร์ในครัว (KDS):** แสดงผลออเดอร์ที่กำลังดำเนินการและบิลที่เสร็จสิ้นแล้วแบบเรียลไทม์
    *   **ระบบรายงาน (Reporting):** สรุปยอดขาย, วิเคราะห์ข้อมูลเชิงลึกด้วย AI, และส่งออกข้อมูลเป็นไฟล์ CSV
    *   **ระบบจัดการกะและเงินสด (Shift & Cash Management):** ติดตามการเปิด/ปิดกะ, เงินสดในลิ้นชัก, และการนำเงินเข้า/ออก
    *   **การตั้งค่าระบบ (Settings):** ปรับแต่งข้อมูลร้าน, รูปแบบใบเสร็จ, และโหมดการใช้งานได้อย่างยืดหยุ่น

---

## 2. ปรัชญาและหลักการพัฒนา (Core Engineering Principles)

นี่คือกฎเหล็ก 5 ข้อที่วิศวกรทุกคนในทีมยึดถือเป็นแนวทางในการทำงาน:

1.  **User-Centric (ผู้ใช้คือศูนย์กลาง):** ก่อนจะเขียนโค้ดแม้แต่บรรทัดเดียว ให้ถามเสมอว่า "สิ่งนี้จะทำให้ชีวิตของผู้ใช้งานง่ายขึ้นหรือไม่?"
2.  **Stability First (ความเสถียรต้องมาก่อน):** ระบบ POS ที่ดีคือระบบที่ไม่เคยล่ม ฟีเจอร์ใหม่ที่สวยงามแต่ทำให้แอปพัง ถือว่าไม่มีค่าใดๆ
3.  **Elegant Design (ออกแบบให้งดงาม):** ความสวยงามคือความเรียบง่ายในการใช้งาน เรามุ่งมั่นสร้างสรรค์ผลิตภัณฑ์ที่น่าใช้และน่ามอง
4.  **Minimal Code, Maximum Impact (โค้ดน้อย ผลลัพธ์มหาศาล):** เลือกใช้เทคโนโลยีที่ช่วยลดความซับซ้อนและเวลาในการพัฒนาให้มากที่สุด เพื่อส่งมอบคุณค่าให้ผู้ใช้ได้เร็วขึ้น
5.  **AI-Enhanced (ขับเคลื่อนด้วย AI):** มองหาโอกาสในการนำ AI เข้ามาเสริมความสามารถของแอปพลิเคชันอยู่เสมอ

---

## 3. การติดตั้งและเริ่มต้นใช้งาน (Getting Started)

**สิ่งที่ต้องมี (Prerequisites):** Node.js

1.  **ติดตั้ง Dependencies:**
    ```bash
    npm install
    ```
2.  **ตั้งค่า API Key:**
    สร้างไฟล์ `.env` ที่ Root Directory ของโปรเจกต์ และเพิ่ม Gemini API Key ของคุณ:
    ```
    API_KEY=YOUR_GEMINI_API_KEY
    ```
3.  **รันโปรเจกต์:**
    ```bash
    npm run dev
    ```

---

## 4. สถาปัตยกรรมและเทคโนโลยี (Architecture & Technology)

### State Management ด้วย React Context API

เราใช้ Context API เป็น "สมอง" ของแอปในการจัดการข้อมูล เพื่อแก้ปัญหา God Component และ Prop Drilling โดยแบ่งความรับผิดชอบของแต่ละ Context อย่างชัดเจน:

#### `DataContext`: ศูนย์กลางข้อมูลและ Logic

*   **หน้าที่:** จัดการข้อมูลหลักทั้งหมด เช่น เมนู, การตั้งค่าร้าน, ประวัติกะ และข้อมูลประจำวัน รวมถึง Logic การทำงานที่ซับซ้อน เช่น การซิงค์ข้อมูลกับ Google Sheets, การคำนวณสรุปยอดกะ, และการจัดการ CRUD (Create, Read, Update, Delete) ของเมนู
*   **การใช้งาน:** Component ต่างๆ จะเรียกใช้ข้อมูลและฟังก์ชันผ่าน Hook `useData()`

#### `CartContext`: ผู้จัดการตะกร้าสินค้า

*   **หน้าที่:** รับผิดชอบทุกอย่างที่เกี่ยวกับตะกร้าสินค้าปัจจุบัน (Current Order) เช่น รายการสินค้า, ส่วนลด, VAT, การคำนวณยอดรวม และการสร้างออเดอร์
*   **การใช้งาน:** Component ที่เกี่ยวกับตะกร้า (เช่น `OrderPanel`) จะเรียกใช้ผ่าน Hook `useCart()`

#### `AppContext`: ผู้ควบคุมสถานะของแอป (UI State)

*   **หน้าที่:** จัดการสถานะของ UI ทั่วไป เช่น หน้าที่กำลังแสดง (view), ธีม (light/dark), โหมดแอดมิน, และการแสดงผลของ Modal ทั้งหมด
*   **การใช้งาน:** Component ทั่วไปจะเรียกใช้ผ่าน Hook `useApp()` เพื่อควบคุม UI และสถานะต่างๆ ของแอป

### Technology Stack

| Layer | Technology | Rationale |
| :--- | :--- | :--- |
| **Frontend** | React.js, TypeScript | UI Library ที่ทันสมัย, มีเสถียรภาพ, และง่ายต่อการบำรุงรักษา |
| **Styling** | Tailwind CSS | พัฒนา UI ที่สวยงามและสอดคล้องกันทั่วทั้งระบบได้อย่างรวดเร็ว |
| **State Management**| React Context API | จัดการสถานะของแอปอย่างเป็นระบบและลด Boilerplate ที่ไม่จำเป็น |
| **Backend & DB** | Google Sheets & Apps Script | Low-code, ยืดหยุ่นสูง, เจ้าของร้านสามารถแก้ไขเมนูได้เอง |
| **AI Engine** | Gemini API | เสริมความสามารถด้านการวิเคราะห์และให้คำแนะนำทางธุรกิจ |
| **Build Tool** | Vite | ประสบการณ์การพัฒนาที่รวดเร็วทันใจ |
| **Deployment** | (CI/CD) | Deploy อัตโนมัติ ทำให้ส่งมอบฟีเจอร์ใหม่ได้อย่างรวดเร็วและปลอดภัย |

---

## 5. แผนผังการไหลของข้อมูล (Data Flow Example)

เพื่อให้เห็นภาพชัดเจนยิ่งขึ้น นี่คือตัวอย่างขั้นตอน **"การเพิ่มสินค้าลงตะกร้า"**:

1.  **User Action:** ผู้ใช้คลิกที่ `MenuCard` ใน Component `MenuGrid.tsx`
2.  **Component Logic:** `MenuGrid.tsx` เรียกใช้ฟังก์ชัน `addToCart()` ซึ่งได้มาจาก Hook `useCart()`
3.  **Context Update:** `CartContext` รับ `MenuItem` เข้ามา, อัปเดต State `cart` ภายในตัวเอง
4.  **Automatic Re-render:** Component `OrderPanel.tsx` ซึ่งกำลัง "ฟัง" การเปลี่ยนแปลงของ `cart` ผ่าน Hook `useCart()` จะทำการ Re-render ตัวเองใหม่โดยอัตโนมัติเพื่อแสดงสินค้าที่เพิ่มเข้ามาในตะกร้าทันที

---

## 6. โครงสร้างไฟล์และโฟลเดอร์ (Project Structure)

โครงสร้างโฟลเดอร์หลักๆ และหน้าที่ของแต่ละส่วน:

```
/src
|-- /components     # ส่วนประกอบย่อยที่ใช้ซ้ำได้ (Buttons, Modals, TopNav)
|-- /contexts       # ที่อยู่ของ Context Providers (DataContext, CartContext, AppContext)
|-- /helpers        # ฟังก์ชันช่วยเหลือเล็กๆ น้อยๆ (เช่น formatCurrency)
|-- /views          # ส่วนประกอบหลักที่ทำหน้าที่เป็น "หน้า" ของแอป (PosView, ReportsScreen)
|   |-- /pos
|   |-- /orders
|   |-- /reports
|   `-- /settings
|-- App.tsx         # จุดเริ่มต้นที่ "ห่อ" ทุกอย่างด้วย Context Providers ทั้งหมด
|-- constants.ts    # ค่าคงที่ที่ใช้ในโปรเจกต์
|-- index.css       # Global Stylesheet
|-- index.tsx       # ไฟล์ที่ Render App.tsx ลงบนหน้าเว็บ
`-- types.ts        # ที่รวม Interface และ Type ทั้งหมดของโปรเจกต์
```
